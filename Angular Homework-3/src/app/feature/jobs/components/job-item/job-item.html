<div class="job-card">
  <div class="job-summary">
    <div class="logo-and-title">
      <img class="company-logo" [src]="logoSrc()" alt="{{ job().company }} logo" (error)="onLogoError()" />
      <div class="title-block">
        <h3 class="job-title">{{ job().position }}</h3>
        <div class="job-meta">
          <span class="company">
            <a [routerLink]="['/company', job().id]">{{ job().company }}</a>
          </span>
          <span class="salary">Salary: {{ job().startingSalary | currency }}</span>
          <span class="work-type">Work Type: {{ job().workType }}</span>
        </div>
      </div>
    </div>

    <div class="actions">
      <button class="btn" type="button" (click)="toggleDetails()">
        @if (expanded()) { Hide details } @else { Show details }
      </button>

      @if (!job().isApplied) {
        <button class="btn primary" type="button" (click)="onApply()">Apply</button>
      } @else {
        <button class="btn danger" type="button" (click)="onCancel()">Cancel</button>
      }

      <a class="btn edit" [routerLink]="['/jobs/edit', job().id]">Edit</a>
    </div>
  </div>

  @if (expanded()) {
    <div class="job-details">
      <p><strong>Location:</strong> {{ job().location }}, {{ job().country }}</p>
      <p><strong>Qualifications:</strong> {{ job().qualifications }}</p>
      <p><strong>Description:</strong> {{ job().description }}</p>
      <p><strong>Expires:</strong> {{ job().expires | date:'mediumDate' }}</p>
    </div>
  }
</div>